# Password Reset Instructions

This document explains how to test and use the password reset functionality in TravelMate.

## Step 1: Start the Django Server on Port 8000

Run the Django server on port 8000 using our helper script:

```bash
python run_server.py
```

If port 8000 is already in use, the script will help you free it up.

## Step 2: Generate a Password Reset Link

Use the verification script to generate a valid password reset link:

```bash
python verify_password_reset.py
```

The script will:
1. Select a user from your database
2. Generate a valid reset token
3. Show you the frontend URL to use
4. Test if the validation endpoint works
5. Optionally test setting a new password

If you want to test with a specific user, specify their username, email, or ID:

```bash
python verify_password_reset.py username_or_email
```

## Step 3: Test in the Frontend

1. Start your React frontend (usually on port 3000)
2. Use the frontend URL generated by the script to directly access the password reset page
3. Enter a new password and confirm it
4. You should be redirected to the login page if successful

## Alternative: Test through the UI Flow

1. Go to the login page in your frontend
2. Click on "Forgot Password?"
3. Enter your email address
4. In development mode, you'll see a reset link directly on the page
5. Click the link and set a new password

## Troubleshooting

If you encounter issues:

1. Make sure both the Django server and React frontend are running
2. Check the Django console for any error messages
3. Verify that the ports match:
   - Backend should be on port 8000
   - Frontend URLs should use port 8000 for API calls
4. Run the debug tool to test token validation:
   ```bash
   python debug_token.py <uid> <token>
   ```

## Email Configuration

To have real emails sent instead of printed to the console:

1. Create a `.env` file in the project root
2. Add your Gmail credentials:
   ```
   EMAIL_HOST_USER=your-gmail@gmail.com
   EMAIL_HOST_PASSWORD=your-app-password
   ```
3. Restart the Django server

Note: You need to generate an App Password in your Google Account settings if you have 2-Factor Authentication enabled. [Instructions here](https://support.google.com/accounts/answer/185833) 